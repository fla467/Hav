<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTFâ€‘8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hopscotch Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { color: #ff6f61; margin-top: 20px; }
    .input-section { margin: 20px; }
    input, button {
      padding: 10px; margin: 5px;
      font-size: 16px; border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #ff6f61;
      color: white;
      cursor: pointer;
      border: none;
    }
    button:hover { background-color: #e65b50; }
    #projectFrame {
      width: 90%; height: 600px;
      border: 2px solid #ccc;
      border-radius: 10px;
      margin-bottom: 10px;
      display: none;
    }
    .info { font-size: 14px; color: #333; margin: 5px 0; }
    .stats { font-size: 14px; color: #333; margin: 5px 0; }
    .disclaimer {
      font-size: 12px;
      color: #555;
      margin-bottom: 20px;
    }
    .disclaimer a { color: #ff6f61; text-decoration: none; }
    .disclaimer a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Hopscotch Viewer</h1>

  <div class="input-section">
    <p>Enter a Hopscotch project URL or UUID:</p>
    <input type="text" id="projectInput" placeholder="e.g. https://c.gethopscotch.com/p/123abc or 123abc">
    <button onclick="viewProject()">View Project</button>
  </div>

  <div id="projectInfo" class="info"></div>
  <div id="projectStats" class="stats"></div>
  <iframe id="projectFrame" src=""></iframe>

  <div class="disclaimer">
    Actual viewing of the project is from  
    <a id="viewerLink" href="https://ae-hopscotch.github.io/hs-tools/play-project/?id=" target="_blank">
      https://ae-hopscotch.github.io/hs-tools/play-project/?id=
    </a>
  </div>

  <script>
    function viewProject() {
      let input = document.getElementById('projectInput').value.trim();
      if (!input) {
        alert("Please enter a project URL or UUID.");
        return;
      }

      // Extract UUID if full URL is given
      let uuid = input;
      try {
        const url = new URL(input);
        const paths = url.pathname.split('/');
        uuid = paths[paths.length - 1] || paths[paths.length - 2];
      } catch(e) {
        // assume input is UUID
      }

      const viewerUrl = `https://ae-hopscotch.github.io/hs-tools/play-project/?id=${uuid}`;
      document.getElementById('projectFrame').src = viewerUrl;
      document.getElementById('projectFrame').style.display = 'block';

      document.getElementById('projectInfo').textContent = `Project ID: ${uuid}`;

      const link = document.getElementById('viewerLink');
      link.href = viewerUrl;
      link.textContent = viewerUrl;

      // Placeholder for plays/likes (if you can get them somehow)
      document.getElementById('projectStats').textContent = `Plays: N/A  |  Likes: N/A`;
    }
  </script>
</body>
</html>
